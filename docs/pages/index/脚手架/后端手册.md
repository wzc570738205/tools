
<!--
 * @Author: wangzhichiao<https://github.com/wzc570738205>
 * @Date: 2020-11-27 09:03:22
 * @LastEditors: wangzhichiao<https://github.com/wzc570738205>
 * @LastEditTime: 2020-12-04 15:08:00
-->

### 后端手册

## 脚手架介绍
Common-Backend脚手架项目与对应的Common-Backend前端相呼应，为脚手架后端项目。提供项目基础框架一站式服务，主要功能包含登录，退出，菜单管理，权限管理，部门管理，字典管理，参数管理，日志管理以及监控管理等功能。
<br>脚手架后端采用SpringBoot服务搭建，提供了符合集团框架规范的Controller,Service,DAO层使用方法，与集团核心基础框架无缝集成，通过使用脚手架源码，可以快速搭建业务项目的基础平台。

后端脚手架源码包含:

| 模块 | 说明 |
|:--------|:--------|
| 登录退出 | 提供基本登录退出机制，同一账号只有一个在线状态 |
| 用户管理 | 系统用户增删查改 |
| 菜单管理 | 灵活的菜单配置机制，可动态对菜单增删查改操作 |
| 权限管理 | 基于Shiro+token的权限认证机制，粒度可到按钮级别 |
| 部门管理 | 企业部门管理，部门底下可挂用户信息 |
| 字典管理 | 项目字典数据信息 |
| 参数管理 | 项目参数数据信息 |
| 日志管理 | 操作日志管理，通过注解无侵入性配置 |
| 监控管理 | 请求记录监控，异常管理 |


## 源码下载

目前提供1.0.0版本源码，归档在公司企业微信微盘：<br>
西安研发中心>应用软件部>公共组件>脚手架>

## 权限管理
脚手架提供一套基于SpringBoot-shiro-vue的权限管理思路，符合RBAC权限规范。

前后端都加以控制,做到按钮/接口级别的权限

每个登录用户拥有各自的N条权限,比如 用户:查询/编辑/新增/删除

通常我们的权限设计都是 用户--角色--权限 ,其中**角色**是我们写代码的人没法控制的,它可以有多条权限,每个用户又可以设计为拥有多个角色.因此如果从角色着手进行权限验证,系统都必须根据用户的配置动起来,非常复杂.

所以我们后台设计的关键点就在于: **后台接口只验证权限,不看角色.**

角色的作用其实只是用来管理分配权限的,真正的验证只验证**权限** ,而不去管你是否是那种角色.体现在代码上就是接口上注解为

```java
@RequiresPermissions("article:add")
```

而不是

```java
@RequiresRoles(value = {"admin","manager","writer"}, logical = Logical.OR) 
```

## 演示环境
[演示地址](http://47.105.123.78:8066/commonFronted)

admin/123456 管理员身份登录,可以新增用户,角色.角色可以分配权限
控制菜单是否显示,新增/删除按钮是否显示。

- 登录页面
![report_excel_template.png](/tools/base_login.png)
- 主页面
![base_home.png](/tools/base_home.png)
- 样式配置  开发环境可以配置固定头部，多页签，菜单logo等信息
![base_setting.png](/tools/base_setting.png)
- 用户管理
![base_user.png](/tools/base_user.png)
- 角色管理
![base_role.png](/tools/base_role.png)
- 操作日志
![base_log.png](/tools/base_log.png)
- 请求监控
![base_record.png](/tools/base_record.png)
- 异常详情
![base_exception.png](/tools/base_exception.png)

## 项目部署
为了简化部署流程，脚手架提供了拆分部署方式，脚手架代码在执行打包命令后，会生成XXX-dist.tar.gz压缩包，在linux环境下解压后会分别有bin,boot,config,lib,logs几个文件夹。具体如下：
| 文件夹 | 说明 |
|:--------|:--------|
|  bin   |  启动,停止等命令，如启动执行sh ./bin/startup.sh  |
|  boot   |  程序执行的Spring boot jar文件，如XXX.jar  |
|  config   |  项目配置文件   |
|  lib  |  项目引用的第三方jar包  |
|  logs  |  日志文件  |
